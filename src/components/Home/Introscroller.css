@import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400&display=swap");

:root{
  /* placement */
  --intro-left: clamp(16px, 23vw, 26vw);
  --intro-top-shift: 0vh;

  /* width */
  --intro-maxw: 1000px;
  --intro-w: 64vw;

  /* type scale */
  --intro-font-min: 26px;
  --intro-font-fluid: 3.8vw;
  --intro-font-max: 64px;

  /* leading & spacing */
  --intro-leading: 1.14;
  --intro-line-gap: 0.26em;

  /* timing */
  --ease-out: cubic-bezier(.22,.61,.36,1);

  /* Colors matching DBM.js */
  --bg: #000000;
  --bg-gradient: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
  --fg: #ffffff;
  --fg-accent: #f0f0f0;
  --muted: rgba(255, 255, 255, 0.75);
  --muted-light: rgba(255, 255, 255, 0.55);
  --primary: #6366f1;
  --primary-glow: rgba(99, 102, 241, 0.15);
  --divider: rgba(255, 255, 255, 0.12);
  --divider-accent: rgba(255, 255, 255, 0.2);

  /* Gradients from DBM.js */
  --gradient-purple: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);
  --gradient-blue: linear-gradient(135deg, #3b82f6 0%, #06b6d4 100%);
  --gradient-orange: linear-gradient(135deg, #f59e0b 0%, #ef4444 100%);
}

/* Scroll capture area with DBM.js colors */
.intro-wrap{
  position: relative;
  height: var(--wrap-h, 210vh);
  background: var(--bg);
  color: var(--fg);
}

/* Sticky viewport */
.intro-sticky{
  position: sticky;
  top: 0;
  height: 100vh;
  display: flex;
  align-items: center;
  transform: translateY(var(--intro-top-shift));
  overflow: hidden;
  z-index: 1;
}

/* Background overlay using DBM.js gradient effects */
.intro-bg-overlay {
  position: absolute;
  inset: 0;
  background: var(--bg-gradient);
  pointer-events: none;
  z-index: 0;
}

/* Animated gradient orbs matching DBM.js */
.intro-bg-overlay::before {
  content: '';
  position: absolute;
  inset: 0;
  background: 
    radial-gradient(60% 60% at 20% 30%, rgba(139, 92, 246, 0.08) 0%, transparent 60%),
    radial-gradient(50% 50% at 70% 60%, rgba(59, 130, 246, 0.08) 0%, transparent 60%),
    radial-gradient(40% 40% at 50% 80%, rgba(245, 158, 11, 0.08) 0%, transparent 60%);
  pointer-events: none;
  z-index: 1;
}

/* Subtle noise texture matching DBM.js */
.intro-bg-overlay::after {
  content: "";
  position: absolute;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 2;
}

/* Text block */
.intro-inner {
  width: min(var(--intro-maxw), var(--intro-w));
  margin-left: var(--intro-left);
  margin-right: 3vw;
  position: relative;
  z-index: 3;
}

/* Each line */
.intro-line {
  position: relative;
  overflow: hidden;
  line-height: var(--intro-leading);
  margin: var(--intro-line-gap) 0;
  white-space: pre-wrap;
}

/* Typography matching DBM.js */
.intro-line > span {
  display: block;
  font-weight: 300;
  letter-spacing: -0.01em;
  font-size: clamp(var(--intro-font-min), var(--intro-font-fluid), var(--intro-font-max));
  font-family: "Inter", "Montserrat", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
}

/* Base dim layer */
.line-dim {
  position: relative;
  z-index: 1;
  opacity: 0.8;
}

/* Reveal text layer */
.line-reveal {
  position: absolute;
  inset: 0;
  z-index: 2;
  will-change: clip-path;
  transition: clip-path 0.1s var(--ease-out);
}

/* Sweep edge with DBM.js gradient colors */
.line-reveal-edge {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 6px;
  margin-left: -3px;
  background: var(--gradient-purple);
  filter: blur(0.5px);
  z-index: 3;
  pointer-events: none;
  transition: opacity 0.12s var(--ease-out), left 0.1s var(--ease-out);
  box-shadow: 0 0 12px rgba(139, 92, 246, 0.4);
}

/* Progress indicator matching DBM.js style */
.intro-progress {
  position: absolute;
  bottom: 60px;
  left: var(--intro-left);
  width: min(var(--intro-maxw), var(--intro-w));
  height: 2px;
  background: var(--divider);
  border-radius: 1px;
  overflow: hidden;
  z-index: 3;
}

.progress-bar {
  width: 100%;
  height: 100%;
  background: var(--gradient-purple);
  border-radius: 1px;
  transform-origin: left center;
  transition: transform 0.08s var(--ease-out);
  box-shadow: 0 0 12px rgba(139, 92, 246, 0.4);
}

/* Enhanced visual effects matching DBM.js */
.intro-sticky::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent 0%, var(--divider-accent) 50%, transparent 100%);
  z-index: 2;
}

/* Glass morphism effect on text container */
.intro-inner::before {
  content: '';
  position: absolute;
  top: -20px;
  left: -20px;
  right: -20px;
  bottom: -20px;
  background: rgba(255, 255, 255, 0.02);
  backdrop-filter: blur(10px);
  border-radius: 16px;
  z-index: -1;
  opacity: 0;
  transition: opacity 0.3s var(--ease-out);
}

.intro-inner:hover::before {
  opacity: 1;
}

/* ---------- Responsive ---------- */

@media (max-width: 1200px) {
  :root {
    --intro-left: 12vw;
    --intro-w: 72vw;
    --intro-font-fluid: 4.2vw;
  }
  .intro-progress { bottom: 50px; }
  .intro-bg-overlay::before {
    background: 
      radial-gradient(50% 50% at 20% 30%, rgba(139, 92, 246, 0.08) 0%, transparent 60%),
      radial-gradient(45% 45% at 70% 60%, rgba(59, 130, 246, 0.08) 0%, transparent 60%),
      radial-gradient(35% 35% at 50% 80%, rgba(245, 158, 11, 0.08) 0%, transparent 60%);
  }
}

@media (max-width: 1024px) {
  :root {
    --intro-left: 10vw;
    --intro-w: 78vw;
    --intro-font-fluid: 4.5vw;
    --intro-font-min: 26px;
  }
}

@media (max-width: 768px) {
  :root {
    --intro-left: 8vw;
    --intro-w: 84vw;
    --intro-font-fluid: 5vw;
    --intro-font-min: 24px;
    --intro-leading: 1.15;
    --intro-line-gap: 0.25em;
  }
  .intro-progress {
    bottom: 40px;
    left: 8vw;
    width: 84vw;
  }
  .intro-inner::before {
    display: none; /* Disable glass effect on mobile for performance */
  }
}

@media (max-width: 640px) {
  :root {
    --intro-left: 6vw;
    --intro-w: 88vw;
    --intro-font-fluid: 5.5vw;
    --intro-font-min: 22px;
    --intro-leading: 1.18;
  }
  .line-reveal-edge {
    width: 4px;
    margin-left: -2px;
  }
}

@media (max-width: 480px) {
  :root {
    --intro-left: 5vw;
    --intro-w: 90vw;
    --intro-font-fluid: 6vw;
    --intro-font-min: 20px;
    --intro-leading: 1.2;
    --intro-line-gap: 0.22em;
  }
  .intro-progress {
    bottom: 25px;
    left: 5vw;
    width: 90vw;
    height: 1.5px;
  }
  .progress-bar { height: 1.5px; }
}

/* Height adjustments */
@media (max-height: 700px) and (orientation: landscape) {
  .intro-wrap { --wrap-h: 400vh; }
  .intro-progress { bottom: 30px; }
}

@media (max-height: 500px) {
  .intro-wrap { --wrap-h: 460vh; }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .line-reveal,
  .line-reveal-edge,
  .progress-bar,
  .intro-inner::before {
    transition: none;
    animation: none;
  }
}

/* High contrast support */
@media (prefers-contrast: high) {
  :root {
    --muted: #ffffff;
    --divider: #ffffff;
  }
  
  .line-reveal-edge {
    background: var(--fg);
    box-shadow: none;
  }
  
  .progress-bar {
    background: var(--fg);
    box-shadow: none;
  }
}

/* Print styles */
@media print {
  .intro-wrap {
    height: auto;
    position: static;
    background: #ffffff !important;
  }
  .intro-sticky { position: static; height: auto; }
  .line-reveal { clip-path: inset(0 0 0 0) !important; color: #000000 !important; }
  .line-dim { display: none; }
  .intro-progress, .line-reveal-edge, .intro-bg-overlay { display: none; }
  .intro-inner::before { display: none; }
}